# クロス集計を使ったデータの分析

ここでは[SIGNATEの練習問題データ](https://signate.jp/competitions/1/data)を使用している

## 作業の概要
* このケースでは決定木モデル

## データの準備
* ライブラリのインポート
  ```python
  import pandas as pd
  import numpy as np
  from matplotlib import pyplot as plt
  %matplotlib inline
  ```

* CSVデータの読み込み
  ```python
  train = pd.read_csv("train.csv")
  test = pd.read_csv("test.csv")
  sample = pd.read_csv("submit_sample.csv",header=None)
  ```

## データの確認
* [基本的なデータの確認](https://github.com/junichitashiro/Technical-Notes/blob/master/MachineLearning/01-データ分析の事前準備.md)をする

## クロス集計によるデータ分析
* 口座を開設した顧客が何人いるか確認する
  ```python
  train["y"].value_counts()
  ```

* marital列と目的変数でクロス集計する
  ```python
  pd.crosstab(train["marital"],train["y"],margins=True)
  ```

* 年齢の分布を見るためにage列をビニングする
  ```python
  # age列の値を確認する
  train["age"].describe()

  # ビニングした値を変数に格納する
  age_bining = pd.cut(train["age"], [0,20,30,40,50,60,100])
  ```

* ビニングした列と目的変数でクロス集計する
  ```python
  pd.crosstab(age_bining,train["y"],margins=True)
  ```

* poutcome列と目的変数でクロス集計する
  ```python
  pout = pd.crosstab(train["poutcome"],train["y"],margins=True)
  pout
  ```

* poutに割合を示す新たなカラムrateを追加してクロス集計する
  ```python
  pout["rate"] = pout[1] / pout["All"]
  pout
  ```
