# ワークフロー作成手順

## 設定ファイル概要

### digファイル

* ワークフロー全体の設計図に該当するファイル
* 実行スケジュールや処理内容、処理対象となるテーブル情報等を記載する

### ymlファイル

* 処理内容の詳細を記載するファイル
* データ連携先との接続情報、文字コード、デリミタ、カラム名等を指定する

### sqlファイル

* エクスポート・インポートするテーブルに対するSQLを記述するファイル
* 業務目的に合わせてカラム名のリネームや対象レコードのフィルタリングをする
* 必須ではない

## S3からTreasureDataへテーブルをインポートするワークフロー設定手順

### 1.ワークフローの設定

1. メニューからWorkflowsを開く
2. New Workflowボタンをクリック
3. Workflof Name：テーブルのインポートであることがわかる名前を付ける
4. Project Name：指定プロジェクトがなければ作成する
5. Workflow Template：Blankを選択する
6. New Workflowボタンがアクティブになるのでクリック

### 2.ファイル定義

1. Edit projectが開くのでdigファイルを定義する
2. 画面右のファイル追加ボタンでymlとsqlファイルを追加して定義する
    * yml：digファイルの **load** に記載しているymlファイル名で作成する
    * sql：digファイルの **upload** に記載しているymlファイル名で作成する
3. 作成が終わったらCloseボタンをクリック

### 3.秘密情報の設定

1. 画面右上の ＋ ボタンをクリックして秘密情報を設定する
    * 設定が必要なのはymlファイル中に **secret** のインデックスが設定されている項目
    * S3からインポートする場合は以下の接続情報を定義する
      * access_key_id：s3.access_key_id
      * secret_access_key：s3.secret_access_key
