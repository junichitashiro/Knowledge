# RDS_DBサーバー構築準備

* VPC作成時とは別にプライベートサブネットを追加する
* RDSは冗長化のために複数のアベイラビリティゾーンにDBを設置するのが推奨されている

## １．プライベートサブネットを追加作成する

1. VPCダッシュボードを開く
2. サブネット画面を開く
    * サブネットの一覧（未作成の場合でもデフォルトが存在する）が表示される
3. サブネットの作成に進む
4. 以下の設定をしてサブネットの作成を実行する
    * VPC ID：magenta-magenta-vpc
    * サブネット名：magenta-magenta-private-subnet-1c
    * アベイラビリティーゾーン：アジアパシフィック(東京) / ap-northeast-1c
    * IPv4 CIDR ブロック：10.0.21.0/24

## ２．セキュリティグループを作成する

1. EC2ダッシュボードを開く
2. セキュリティグループ画面を開く
3. セキュリティグループの作成に進む
4. 以下の設定をしてセキュリティグループの作成をする
    * 基本
      * セキュリティグループ名：magenta-magenta-db
      * 説明：magenta-magenta-db
      * VPC：magenta-magenta-vpc
    * インバウンドルール
      * タイプ：MySQL/Aurora
      * プロトコル：TCP
      * ポート範囲：3306
      * ソース：カスタム
        * セキュリティグループ：magenta-magenta-webのセキュリティグループID

## ３．RDSを作成する

1. RDSダッシュボードを開く
2. サブネットグループ画面を開く
3. DBサブネットグループの作成に進む
4. 以下の設定をしてサブネットグループの作成をする
    * 詳細
      * 名前：magenta-magenta-subnet-group
      * 説明：magenta-magenta-subnet-group
      * VPC：magenta-magenta-vpc
    * サブネットを追加
      * アベイラビリティーゾーン：ap-northeast-1a
      * ap-northeast-1a：10.0.20.0/24
      * アベイラビリティーゾーン：ap-northeast-1c
      * ap-northeast-1c：10.0.21.0/24

## ４．パラメータグループを作成する

1. RDSダッシュボードを開く
2. パラメータグループ画面を開く
3. パラメータグループの作成に進む
4. 以下の設定をしてパラメータグループを作成する
    * パラメータグループファミリー：mysql8.0
    * タイプ：DB Parameter Group
    * グループ名：magenta-magenta-mysql80
    * 説明：グループ名と同じ

## ５．オプショングループを作成する

1. RDSダッシュボードを開く
2. オプショングループ画面を開く
3. グループの作成に進む
4. 以下の設定をしてオプショングループを作成する
    * 名前：magenta-magenta-mysql80
    * 説明：グループ名と同じ
    * エンジン：mysql
    * メジャーエンジンのバージョン：8.0
