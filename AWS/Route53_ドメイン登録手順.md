# Route53_ドメイン登録手順

* ここでは事前に __aws-dev.work__ ドメインをお名前.comで購入している
* 購入したドメインをIPアドレスと紐付ける
* Elastic IPアドレスをパブリックIPアドレスに関連付けておく

***

## １．ドメインのネームサーバーをRoute53に変更する

### ホストゾーンを作成する

1. Route53ダッシュボードを開く
2. __DNS 管理__ の __今すぐ始める__ をクリックする
3. __ホストゾーンの作成__ をクリックする
4. 以下の入力と設定をして __作成__ をクリックする
    * ドメイン名：aws-dev.work
    * タイプ：パブリックホストゾーン

***

## ２．ターミナルからネームサーバーを確認する

### 購入直後の場合、販売元のネームサーバーになっている

1. ターミナルからEC2にログインする
2. コマンドでネームサーバーを確認する

    ```bash
    dig aws-dev.work NS +short
    # dns2.onamae.com.
    # dns1.onamae.com.
    ```

***

## ３．ネームサーバーを変更する

### お名前.comでドメインのネームサーバーを変更する

反映には24時間～72時間までかかる場合がある

1. お名前.comにログインする
2. ドメイン > ドメイン詳細 > __ネームサーバー設定__ を開く
3. __aws-dev.work__ を選択する
4. ネームサーバーの選択で __その他__ タブを開く
5. __その他のネームサーバーを使う__ を選択する
6. ネームサーバーにRoute53で表示されているNSタイプの値をすべて転記する（※末尾の __.__ は不要）
7. __確認__ をクリックする
8. 反映後に上記のコマンドを実行すると、設定されたネームサーバーが表示される

***

## ４．ドメイン名にEC2インスタンスのIPアドレスを紐付ける

### ドメインにAレコードを登録する

1. Route53ダッシュボードを開く
2. __ホストゾーン__ をクリックする
3. 対象のドメイン名（__aws-dev.work__）をクリックする
4. __レコードセットの作成__ をクリックする
5. 以下の入力と設定をして __作成__ をクリックする
    * 名前：空白のまま
    * タイプ：A-IPv4 アドレス
    * エイリアス：いいえ
    * TTL：300
    * 値：Elastic IPアドレス
    * ルーティングポリシー：シングル

***

## ５． Webブラウザでアクセスする

Webブラウザから __aws-dev.work__ にアクセスするとApacheのTest Pageが表示される。
